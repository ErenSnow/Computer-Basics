## [第4章 存储器（重点）](https://app.yinxiang.com/fx/03c83b5f-4896-4e1c-b4cb-9a9e212c4b7d)
### 4.1 概述
> 存储器可分哪些类型？
> 现代存储器的层次结构，为什么要分层？

#### 一、存储器分类
##### 1.按存储介质分类
- 易失
    - 半导体存储器：TTL、MOS
- 非易失
    - 磁表面存储器：磁头、载磁体
    - 磁芯存储器：硬磁材料、环装元件
    - 光盘存储器：激光、磁光材料

##### 2.按存取方式分类
- 存取时间与物理地址无关（随机访问）
    - 随机存储器：在程序的执行过程中可读可写
    - 只读存储器：在程序的执行过程中只读
- 存取时间与物理地址有关（串行访问）
    - 顺序存取存储器：磁带
    - 直接存取存储器：磁盘

##### 3.按在计算机中的作用分类
- 主存储器
    - RAM
        - 静态RAM
        - 动态RAM
    - ROM
        - MROM
        - PROM
        - EPROM
        - EEPROM
- FLash Memory
- 高速缓冲存储器（Cache）
- 辅助存储器：磁盘、磁带、光盘

#### 二、存储器的层级结构
##### 1.存储器三个主要特性的关系
![7cf85d9a8b9b42dc06ccb8f1c7cc887f.png](en-resource://database/835:1)

##### 2.缓存 - 主存层次 和 主存 - 辅存层次
![97dedc0f69eda1f6eb0e517f07b1f842.png](en-resource://database/837:1)

***
### 4.2 主存储器
#### 一、概述
##### 1.主存的基本组成
![af7ad174ddad7209eda3405dbdb49041.png](en-resource://database/839:1)

##### 2.主存与CPU之间的联系
![80760fa9362e135987f7f7b1f7991771.png](en-resource://database/841:1)

##### 3.主存中存储单元地址的分配
![cf607c43d4444628fc580ce12383aaef.png](en-resource://database/863:1)


##### 4.主存的技术指标
- 存储容量：主存存放二进制代码的总位数
- 存储速度
    - 存取时间：存储器的访问时间、读出时间、写入时间
    - 存取周期：连续两次独立的存储器操作（读或写）所需的最小间隔时间，读周期、写周期
 - 存储器的带宽：位/秒

#### 二、半导体存储芯片简介
##### 1.半导体存储芯片的基本结构
![861433f1f5b79529bb7de0472730acd9.png](en-resource://database/845:1)

**存储芯片片选线的作用**
![c09a1844d862e45dd996af9fafad4f98.png](en-resource://database/847:1)

##### 2.半导体存储芯片的译码驱动方式
- 线选法
![160545b98523033e48b764071f9e96f1.png](en-resource://database/849:1)

- 重合法
![0fb5045bab4ff7e9c4ffe10c1ea0811f.png](en-resource://database/851:1)

#### 三、随机存取存储器（RAM）

##### 1. 静态 RAM (SRAM)
- 保存0和1的原理是什么？
- 基本单元电路的构成是什么？
- 对单元电路如何读出和写入？
- 典型芯片的结构是很么样子的？
- 静态RAM芯片的如何进行读出和写入操作？

**静态 RAM 基本电路**
![89c61f015deda451f431c8c355606984.png](en-resource://database/853:1)

**静态 RAM 基本电路的 读 操作**
![c226e1b6135c1528e96f512f148f5006.png](en-resource://database/855:1)

**静态 RAM 基本电路的 写 操作**
![361c5fcc773933e6c1c7c102715c6c79.png](en-resource://database/857:1)

##### 2. 动态 RAM ( DRAM )
**动态 RAM ( DRAM )**
![0da78694e0e93484fcb65e7a3af0a91f.png](en-resource://database/859:1)

##### 3. 动态 RAM 和静态 RAM 的比较
![5074bb0eede013630b5b49b47974b400.png](en-resource://database/861:1)

#### 四、只读存储器（ROM）
- 早期的只读存储器——在厂家就写好了内容
- 改进1——用户可以自己写——一次性
- 改进2——可以多次写——要能对信息进行擦除
- 改进3——电可擦写——特定设备
- 改进4——电可擦写——直接连接到计算机上
##### 1. 掩模 ROM ( MROM )
- 行列选择线交叉处有 MOS 管为“1”
- 行列选择线交叉处无 MOS 管为“0”

##### 2. PROM (一次性编程)
![642dc58c2d834d442e88b7b0e51306d8.png](en-resource://database/865:1)

##### 3. EPROM (多次性编程 )
![9b69c1c963a70e7bfb897c207253d0de.png](en-resource://database/867:1)

##### 4. EEPROM (多次性编程 )
- 电可擦写
- 局部擦写
- 全部擦写

##### 5. Flash Memory (闪速型存储器)
- EPROM：价格便宜 集成度高
- EEPROM：电可擦洗重写
- 比 EEPROM快：具备 RAM 功能

#### 五、存储器与CPU的连接
##### 1. 存储器容量的扩展
- 位扩展
- 字扩展
- 同时扩展
##### 2. 存储器与 CPU 的连接
- 地址线的连接
- 数据线的连接
- 读/写命令线的连接
- 片选线的连接
- 合理选择存储芯片
- 其他 时序、负载
#### 六、存储器的校验
##### 1. 编码的最小距离
> 任意两组合法代码之间 二进制位数 的 最少差异，编码的纠错 、检错能力与编码的最小距离有关

##### 2. 汉明码的组成
- 汉明码采用奇偶检验
- 汉明码采用分组校验
- 汉明码的分组是一种非划分方式

#### 七、提高访存速度的措施
- 采用高速器件
- 采用层次结构 Cache –主存
- 调整主存结构

##### 1.单体多字系统
##### 2.多体并行系统
- 高位交叉：各个体轮流编址
- 低位交叉：各个体轮流编址。特点：在不改变存取周期的前提下，增加存储器的带宽

##### 3.高性能存储芯片
- SDRAM (同步 DRAM)
> 在系统时钟的控制下进行读出和写入CPU 无须等待
- RDRAM
> 由 Rambus 开发，主要解决存储器带宽问题
- 带 Cache 的 DRAM
> 在 DRAM 的芯片内 集成 了一个由 SRAM 组成的Cache ，有利于猝发式读取

***
### 4.3 高速缓冲存储器
#### 一、概述
##### 1.为什么用Cache
> 避免 CPU “空等” 现象

**CPU 和主存（DRAM）的速度差异**
![f678b6a5af862d0edf3e4d7e6d66479d.png](en-resource://database/869:0)

##### 2. Cache 的工作原理
- 主存和缓存的编址
![2cbc7f7b7da6321560f28287ef20eabf.png](en-resource://database/871:0)

- 命中与未命中
![d00dd62a5cc2184f1a5abdb2124adb8a.png](en-resource://database/873:0)

- Cache 的命中率
![9b6657999377dd6a606b6f7aef91b3e2.png](en-resource://database/875:0)

- Cache –主存系统的效率
![7d1570ec789a06b82e6570d8c87b6534.png](en-resource://database/877:0)

##### 3. Cache 的基本结构
![5f19a7634c054f1fe74561dba885199e.png](en-resource://database/879:0)

##### 4. Cache 的 读写 操作
- 读
![0e99679c0d1d16c21e20240c13869cd4.png](en-resource://database/881:0)

- 写
![a237b6af73367ac864d32fc3f2117ab1.png](en-resource://database/883:0)

##### 5. Cache 的改进
![c9bc863997168d1ba9b33fb50de10f7a.png](en-resource://database/885:0)

#### 二、Cache – 主存的地址映射
##### 1. 直接映射
![3b9b32bc8a51e125f60345fc02ee7784.png](en-resource://database/887:0)

##### 2.全相联映射
![f9aa1228fdc932a0c90eaaf2cdbf35b8.png](en-resource://database/893:0)

##### 3.组相联映射
![5755b69211ee1eeaf0353004fc3db3c4.png](en-resource://database/891:0)

#### 三、替换算法
##### 1.先进先出（FIFO）算法
##### 2.近期最少使用（LRU）算法

##### 小结
- 直接：某一 主存块 只能固定 映射到 某一 缓存块
- 全相联：某一 主存块 能 映射到 任一 缓存块
- 组相联：某一 主存块 只能 映射到 某一 缓存 组 中的 任一块

***
### 4.4 辅助存储器
#### 一、概述
##### 1.特点
> 不直接与CPU交换信息

##### 2.磁表面存储器的技术指标
- 记录密度：道密度 Dt  位密度 Db
- 存储容量：C = n × k × s
- 平均寻址时间：寻道时间 + 等待时间
- 数据传输率：Dr = Db × V
- 误码率：出错信息位数与读出信息的总位数之比

#### 二、磁记录原理和记录方式
- 写
![4161bd6518482e8919dec2f5274f4214.png](en-resource://database/895:1)

- 读
![97510f59790331a1786a893606d40cf8.png](en-resource://database/897:0)

#### 三、硬磁盘存储器
##### 1. 硬磁盘存储器的类型
- 固定磁头和移动磁头
- 可换盘和固定盘
##### 2. 硬磁盘存储器结构
![9260f7d246e263996af0aa70fa3bb03b.png](en-resource://database/899:0)

- 磁盘驱动器
![36a3064c14aedec2f7b8ffdd3cf3be6d.png](en-resource://database/901:1)

- 磁盘控制器
    - 接收主机发来的命令，转换成磁盘驱动器的控制命令
    - 实现主机和驱动器之间的数据格式转换
    - 控制磁盘驱动器读写
   
> 磁盘控制器是主机与磁盘驱动器之间的 接口

#### 四、软磁盘存储器
![2a9b97404346de589e7c22f0bfe03141.png](en-resource://database/903:0)

#### 五、光盘存储器
##### 1. 概述
- 采用光存储技术：利用激光写入和读出
- 第一代光存储技术：采用非磁性介质 不可擦写
- 第二代光存储技术：采用磁性介质 可擦写

##### 2. 光盘的存储原理
- 只读型和只写一次型：热作用（物理或化学变化
- 可擦写光盘： 热磁效应

